{
  "dependencyDashboard": true,
  "customDatasources": {
    "localstaging": {
      "format": "yaml",
      "defaultRegistryUrlTemplate": "file://demonstration/gitops/applications/staging.yaml",
      "transformTemplates": [
        "{\"releases\": [{\"version\": \"spec.generators.[*].list.elements.[*].source.targetRevision\"}]}"
      ]
    }
  },
  "customManagers": [
    {
      "customType": "regex",
      "fileMatch": [
        "demonstration/gitops/applications/staging.yaml"
      ],
      "matchStrings": [
        "repoURL:\\s*(?<depName>[^\\n]+)\\s*.*?targetRevision:\\s*(?<currentValue>[^\\s]+)"
      ],
      "datasourceTemplate": "git-tags"
    },
    {
      "customType": "regex",
      "fileMatch": [
        "demonstration/gitops/applications/production.yaml"
      ],
      "matchStrings": [
        "repoURL:\\s*(?<packageName>(?!\\{\\{).*?)\\s*.*?targetRevision:\\s*(?<currentValue>(?!\\{\\{).*?)"
      ],
      "depNameTemplate": "{{{ replace 'git@github.com:maximeancellin\/(.*).git' '$1' packageName }}}",
      "datasourceTemplate": "custom.localstaging"
    }
  ]
}
